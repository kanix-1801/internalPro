<template>
    <lightning-card title="Product Image Gallery">
        <div class="slds-grid slds-wrap maincontainer">

            <div class="slds-col slds-size_1-of-1">
                <div class="slds-box slds-m-bottom_small">
                    Top Box
                </div>
            </div>

            <!-- Gallery row -->
            <div class="slds-col slds-size_1-of-1">
                <div class="slds-box gallery-row">

                    <!-- PREVIEW COLUMN -->
                    <div class="preview-col slds-text-align_center">
                        <div class="preview-images-column">
                            <template if:true={previousImage}>
                                <img src={previousImageUrl} alt={previousImage.name} class="preview-img" />
                            </template>
                            <template if:true={nextImage}>
                                <img src={nextImageUrl} alt={nextImage.name} class="preview-img" />
                            </template>
                        </div>
                    </div>

                    <!-- MAIN COLUMN -->
                    <div class="main-col">
                        <template if:true={currentImage}>
                            <div class="main-frame">
                                <img src={currentImageUrl} alt={currentImage.name} class="main-img" />

                                <!-- navigation arrows -->
                                <button class="nav-arrow left-arrow icon_color" onclick={handlePrevious} title="Previous">
                                    <lightning-icon icon-name="utility:left" alternative-text="Previous"
                                        class="slds-icon icon_color"></lightning-icon>
                                </button>
                                <button class="nav-arrow right-arrow" onclick={handleNext} title="Next">
                                    <lightning-icon icon-name="utility:right" alternative-text="Next"
                                        class="slds-icon icon_color"></lightning-icon>
                                </button>

                                <!-- control bar -->
                                <div class="control-bar">
                                    <div class="control-left">
                                        <lightning-button-icon  class="control-icon" variant="bare" icon-name="utility:image"
                                            alternative-text="Expand" onclick={handleExpand}></lightning-button-icon>
                                        <lightning-button-icon class="control-icon" variant="bare" icon-name="utility:download"
                                            alternative-text="Download"
                                            onclick={handleDownload}></lightning-button-icon>
                                    </div>
                                    <div class="control-right">
                                        {currentImage.name}
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>

                </div>
            </div>

            <!-- Thumbnail strip -->
            <div class="thumbnail-strip">
                <template for:each={thumbnailItems} for:item="item">
                    <img key={item.key} src={item.url} alt={item.name} class={item.className} data-index={item.index}
                        onclick={handleThumbnailClick} />
                </template>
            </div>


        </div>

        <!-- modal -->
        <template if:true={showModal}>
            <section class="slds-modal slds-fade-in-open custom-modal">
                <div class="slds-modal__container custom-modal-container">
                    <button class="close-btn" onclick={handleModalClose} title="Close">
                        <lightning-icon icon-name="utility:close" alternative-text="Close"></lightning-icon>
                    </button>
                    <div class="slds-p-around_medium custom-modal-content">
                        <img src={currentImageUrl} alt={currentImage.name} class="expanded-image" />
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>
    </lightning-card>
</template>